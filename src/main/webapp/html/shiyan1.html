<!DOCTYPE html>
<html lang="en">
<head>


    <script src="https://cdn.bootcss.com/jquery/1.8.2/jquery.js"></script>
    <script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>  <!--<引用jquery库>-->
    <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="http://www.gongjuji.net/Content/files/jquery.md5.js"></script>
    <script src="JquerySession.js"></script>


    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript">
        function AJAX(page) {
        	alert('11111')
            var str='',span='';
            $.ajax({//
                    type:"POST",
                    url:"searchTestmenu_all",//
                    dateType:"JSON",
                    data:{p:page},//传送想要的页数
                    beforeSend:function () {},
                    success:function(data){
                    	alert("11111")
                        var arr=JSON.parse(data);
                        if(arr.data.length != 0)//判断为不为零
                        {
                        		alert("11111")
                            alert(arr.data.length);
                            var  c1='<td>'+"<input type='checkbox' name='ck'/>"+'</td>';
                            var  c2='<td>'+'</td>';
                            var  c3='<td>'+"<input type='text'  readonly style='text-align: center;' id='vno' value=''/>"+'</td>';
                            var c4='<td>'+"<input type='text'  style='text-align: center;' id='canlei' value=''/>"+'</td>';
                            var c5='<td>'+"<input type='text'  style='text-align: center;' id='season' value=''/>"+'</td>';
                            var c6='<td>'+"<input type='text'  style='text-align: center;'id='price' value=''/>"+'</td>';
                            var c7='<td>'+'</td>';
                            var c8='<td>'+'</td>';
                            var c9='<td>'+"<button class='myButton'  type='button'onclick='mclear()'>清除</button>+'</td>';
                            var c10='<td>'+"<button class='myButton'  type='button' onclick='add()'>增加</button>"+'</td>';
                            str+='<tr>'+c1+c2+c3+c4+c5+c6+c7+c8+c9+c10+'</tr>'
                            for(var i=0;i<=arr.data.length-1;i++)
                            {
                               var  c1='<td>'+"<input type='checkbox' name='ck'/>"+'</td>';
                               var  c2='<td>'+"<input type='text'  readonly style='text-align: center;' id='vno"+i+"' value='"+arr.data[i].vno+"'/>"+'</td>';
                               var  c3='<td>'+"<input type='text'  readonly style='text-align: center;' id='vno"+i+"' value='"+arr.data[i].vname+"'/>"+'</td>';
                               var c4='<td>'+"<input type='text'  style='text-align: center;' id='canlei"+i+"' value='"+arr.data[i].menutype+"'/>"+'</td>';
                               var c5='<td>'+"<input type='text'  style='text-align: center;' id='season"+i+"' value='"+arr.data[i].season+"'/>"+'</td>';
                               var c6='<td>'+"<input type='text'  style='text-align: center;'id='price"+i+"'value='"+arr.data[i].price+"'/>"+'</td>';
                               var c7='<td>'+"<input type='text'  readonly style='text-align: center;'id='pingfen"+i+"'value='"+arr.data[i].publicscore+"'/>"+'</td>';
                               var c8='<td>'+"<input type='text' readonly style='text-align: center;'id='pingfen"+i+"'value='"+arr.data[i].privatescore+"'/>"+'</td>';
                               var c9='<td>'+"<button class='myButton'  type='button' onclick='del(this)' >删除</button>"+'</td>';
                               var c10='<td>'+"<button class='myButton'  type='button' onclick='xiugai(this)' >修改</button>"+'</td>';
                                str+='<tr>'+c1+c2+c3+c4+c5+c6+c7+c8+c9+c10+'</tr>'
                            }
                            $('mytable').html(str);//添加生成的行
                            if(arr.rowcount%3==0)a=arr.rowcount/3;
                            else
                                a=arr.rowcount/3+1;

                            for(var i=1;i<=a;i++){
                                if(i==page+1)
                                {
                                    span+='<span style="background-color: #FFFFFF">'+i+'</span>';//添加span
                                    continue;
                                }
                                span+='<span>'+i+'</span>';
                            }

                            $('myspan').html(span);
                            $('myspan').on('click',send);//绑定响应事件
                            function send() {
                                var p=$(this).html()-1 ;
                                AJAX(p);
                            }
                        }
                        else
                        {
                            alert("当前菜单未补充");
                        }
                    },
                    error:function(data){
                        console.log();
                    },
                    complete:function(){}
                }

            )
        }
        function a() {//查询按钮事件
        		alert('aaa');
            AJAX(0);//先传送一个0过去
        }
        function  b(){
        		alert('b');
        }
    </script>
    <style type="text/css">
        span{display: block;float: left;width: 50px;height: 20px;background-color: green;text-align: center;margin-right: 10px;}
        span:hover{cursor:pointer;}
    </style>
</head>
<body>y
<h1>Test</h1>
<input >
<button type="button" onclick="b()">修改</button>
<table id="mytable">

</table>
<div id="myspan">

</div>
</body>
</html>