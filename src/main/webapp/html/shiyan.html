<!DOCTYPE html>
<html lang="en">
<head>


<script src="https://cdn.bootcss.com/jquery/1.8.2/jquery.js"></script>
<script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>  <!--<引用jquery库>-->
    <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="http://www.gongjuji.net/Content/files/jquery.md5.js"></script>
    <script src="JquerySession.js"></script>

    
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript">
    function AJAX(page) {
        var str='',span='',a=0;
        $.ajax({//
                type:"POST",
                url:"searchTestmenu_all",//
                dateType:"JSON",
                data:{p:page},//传送想要的页数
                beforeSend:function () {},
                success:function(data){
                    var arr=JSON.parse(data);
                    if(arr.data.length != 0)//判断为不为零
                    {
                        var  c22='<td>选择</td>';
                        var  c23='<td>编号</td>';
                        var c24='<td>菜名</td>';
                        var c25='<td>餐类</td>';
                        var c26='<td>季节</td>';
                        var c27='<td>价格</td>';
                        var c28='<td>食评</td>';
                        var c29='<td>餐评</td>';
                        var c210='<td>操作一</td>';
                        var  c21='<td>操作二</td>';
                        str+='<tr>'+c22+c23+c24+c25+c26+c27+c28+c29+c210+c21+'</tr>';
                        
                        
                    		var  c11='<td>'+"<input type='checkbox' name='ck'/>"+'</td>';
                        var  c12='<td>'+"<input type='text'  readonly style='text-align: center;' id='vno' value=''/>"+'</td>';
                        var  c13='<td>'+"<input type='text'   style='text-align: center;' id='vname' value=''/>"+'</td>';
                        var c14='<td>'+"<input type='text'   style='text-align: center;' id='canlei' value=''/>"+'</td>';
                        var c15='<td>'+"<input type='text'   style='text-align: center;' id='season' value=''/>"+'</td>';
                        var c16='<td>'+"<input type='text'   style='text-align: center;' id='price' value=''/>"+'</td>';
                        var c17='<td>'+"<input type='text'  readonly style='text-align: center;' id='pingfen' value=''/>"+'</td>';
                        var c18='<td>'+"<input type='text'  readonly style='text-align: center;' id='pingfen' value=''/>"+'</td>';
                        var c19='<td>'+"<button class='myButton'  type='button' onclick='del(this)' >清除</button>"+'</td>';
                        var c110='<td>'+"<button class='myButton'  type='button' onclick='del(this)' >增加</button>"+'</td>';
                        str+='<tr>'+c11+c12+c13+c14+c15+c16+c17+c18+c19+c110+'</tr>';
                    	
                        for(var i=0;i<=arr.data.length-1;i++)
                        {
                        	var  c1='<td>'+"<input type='checkbox' name='ck'/>"+'</td>';
                            var  c2='<td>'+"<input type='text'  readonly style='text-align: center;' id='vno"+i+"' value='"+arr.data[i].vno+"'/>"+'</td>';
                            var  c3='<td>'+"<input type='text'  readonly style='text-align: center;' id='vno"+i+"' value='"+arr.data[i].vname+"'/>"+'</td>';
                            var c4='<td>'+"<input type='text'  style='text-align: center;' id='canlei"+i+"' value='"+arr.data[i].menutype+"'/>"+'</td>';
                            var c5='<td>'+"<input type='text'  style='text-align: center;' id='season"+i+"' value='"+arr.data[i].season+"'/>"+'</td>';
                            var c6='<td>'+"<input type='text'  style='text-align: center;'id='price"+i+"'value='"+arr.data[i].price+"'/>"+'</td>';
                            var c7='<td>'+"<input type='text'  readonly style='text-align: center;'id='pingfen"+i+"'value='"+arr.data[i].publicscore+"'/>"+'</td>';
                            var c8='<td>'+"<input type='text' readonly style='text-align: center;'id='pingfen"+i+"'value='"+arr.data[i].privatescore+"'/>"+'</td>';
                            var c9='<td>'+"<button class='myButton'  type='button' onclick='del(this)' >删除</button>"+'</td>';
                            var c10='<td>'+"<button class='myButton'  type='button' onclick='xiugai(this)' >修改</button>"+'</td>';
                             str+='<tr>'+c1+c2+c3+c4+c5+c6+c7+c8+c9+c10+'</tr>';
                        }
                        $('#mytable').html(str);//添加生成的行
                        if(arr.rowcount%3==0)a=arr.rowcount/3;
                        else 
                        		a=parseInt(arr.rowcount/3)+1;
                        
                        if(page==0){
                        		if(a<3){
                        			for(var i=1;i<=a;i++){
                                        if(i==page+1){
                                        span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
                                        continue;}
                                        span+='<span>'+i+'</span>';//添加span
                                    }
                        		}
                        		else
                        			{
                        			for(var i=1;i<=3;i++){
                                        if(i==page+1){
                                        span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
                                        continue;}
                                        span+='<span>'+i+'</span>';//添加span
                                    }
                        			}
                        	
                        }
                        else
                        	{
		                        	if(a>=page+2){
		                    			for(var i=page;i<=page+2;i++){
		                                    if(i==page+1){
		                                    span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
		                                    continue;}
		                                    span+='<span>'+i+'</span>';//添加span
		                                }
		                    		}
		                        	else
		                        		{
		                        			for(var i=page;i<=a;i++){
		                                    if(i==page+1){
		                                    span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
		                                    continue;}
		                                    span+='<span>'+i+'</span>';//添加span
		                                }
		                        		
		                        		}
                        	}
                        alert(a);
                        span+="<input  readonly type='text' value='"+a+"'/>"
                        span+="<input type='text' id='z' value=''/>"
                        	span+="<button type='button' onclick='b()' >跳转</button>";
                        $('#a').html(span);
                        $('span').on('click',send);//绑定响应事件
                        function send() {
                            var p=parseInt($(this).text())-1;
                           
                            AJAX(p);
                        }
                    }
                    else
                    {
                        alert("当前菜单未补充");
                    }
                },
                error:function(data){
                    console.log();
                },
                complete:function(){}
            }

        )
    }
        function a() {//查询按钮事件
            AJAX(0);//先传送一个0过去
        }
        function b() {//查询按钮事件
        	var p=parseInt($('#z').val())-1;
            AJAX(p);
        }
        </script>
    <style type="text/css">
        span{display: block;float: left;width: 50px;height: 20px;background-color: green;text-align: center;margin-right: 10px;}
        span:hover{cursor:pointer;}
        .td<
        		border:solid 1px;
        >
    </style>
</head>
<body>y
<h1>Test</h1>
<input >
<button type="button" onclick="a()">修改</button>
    <table id="mytable" style="border: solid;1px">

    </table>
    <div id="a">

    </div>
</body>
</html>