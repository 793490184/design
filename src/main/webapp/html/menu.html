<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">

    <meta charset="UTF-8">
    <title>大菜单</title>

    <script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>  <!--<引用jquery库>-->
    <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="http://www.gongjuji.net/Content/files/jquery.md5.js"></script>
    <script src="JquerySession.js"></script>

    <style>
        div{
            padding:0px 0px 0px 0px;
            margin: 0px 0px 0px 0px;
        }

        .radio-check { position: relative; height: 35px; }

        .hr1{
            width: 1520px;
            border:none;
            border-top:12px solid #F0745F;
            margin: 0px 0px 0px 0px;
            padding: 0px 0px 0px 0px;
        }
        .hr2{
            width: 1220px;
            border:none;
            top:28px;
            position: absolute;
            border-top:2px solid #F0745F;
            margin: 0px 0px 0px 0px;
            padding: 0px 0px 0px 0px;
        }
        .hr3{
            width: 1220px;
            border:none;
            top:0px;
            position: absolute;
            border-top:2px solid #F0745F;
            margin: 0px 0px 0px 0px;
            padding: 0px 0px 0px 0px;
        }
        .hr4{
            width: 1220px;
            border:none;
            top:100px;
            position: absolute;
            border-top:2px solid #F0745F;
            margin: 0px 0px 0px 0px;
            padding: 0px 0px 0px 0px;
        }
        .myweb{
            width: 1220px;
            height:1350px;
            position: absolute;
            left:150px;
            right:150px;
            top:12px;

        }
        .myweb1{/*放login图标*/
            width: 1220px;
            height:150px;
            position: absolute;

        }
        .myweb2{/*放导航栏*/
            width: 1220px;
            height:50px;
            position: absolute;
            top:150px;

        }
        .myweb3{
            width: 1220px;
            height:30px;
            position: absolute;
            top:200px;
            background-color:white;
        }
        .myweb4{
            width: 1220px;
            height:440px;
            position: absolute;
            top:230px;

        }
        .myweb5{
            width: 1220px;
            height:30px;
            position: absolute;
            top:670px;
            background-color:white;
        }
        .myweb7{
            width: 1220px;
            height:600px;
            position: absolute;
            top:700px;
        }
        .myweb6{
            width: 1220px;
            height: 50px;
            background-color: #232323;
            position: absolute;
            top:1300px;

        }

        .photo1{
            background-image: url('lebaite2.png');
            background-repeat: no-repeat;
            position: absolute;
            top:0px;
            left:0px;
            height:111px ;
            width: 452px;
        }

        .nav ul{
            width:980px;/*设置元素宽度为980px*/
            height:28px;
            border:0px solid #000;/*设置一个颜色为#000，宽度为1px的边框*/
            margin:0px 0px 0px 0px;/*也可以简写为margin:0 auto*/
            padding: 0px;

        }
        .nav ul li{
            float:left;/*让li元素左浮动*/
            list-style-type:none;
        }

        .nav ul li a{
            width:100px;
            height:50px;
            line-height:50px;
            color:black;
            margin:0px 0px 0px 0px;
            font-size:15px;
            display:block;/*此元素将显示为块级元素，此元素前后会带有换行符。*/
            text-align:center;
            text-decoration:none;
            border-right:1px solid #000;/*设置右边框*/
        }

        .nav ul li a1{
            width:100px;
            height:50px;
            line-height:50px;
            color:black;
            margin:0px 0px 0px 0px;
            font-size:15px;
            display:block;/*此元素将显示为块级元素，此元素前后会带有换行符。*/
            text-align:center;
            text-decoration:none;

        }

        .nav ul li a:hover{
            width:100px;
            height:50px;
            line-height:50px;
            color:white;
            background-color:#CE5541 ;
        }
        .nav ul li a1:hover{
            width:100px;
            height:50px;
            line-height:50px;
            color:white;
            background-color:#CE5541 ;
        }

        .pt1{
            background-size:cover;
            width:275px;
            height:400px;
            top:35px;
            left: 15px;
            position: absolute;
            background-image: url("c1.jpg");
            border-style:solid;
        }

        .pt2{
            background-size:cover;
            width:275px;
            height:400px;
            top:35px;
            left: 320px;
            position: absolute;
            background-image: url("c2.jpg");
            border-style:solid;
        }
        .pt3{
            background-size:cover;
            width:275px;
            height:400px;
            top:35px;
            left: 625px;
            position: absolute;
            background-image: url("c3.png");
            border-style:solid;
        }
        .pt4{
            background-size:cover;
            width:275px;
            height:400px;
            top:35px;
            left: 930px;
            position: absolute;
            background-image: url("c4.png");
            border-style:solid;
        }

        .leibie
        {
            position: absolute;
            top:50px;
            left:800px;
        }
        .btxg{
            position: absolute;
            height:30px ;
            width: 80px;
            top:50px;
            left:1050px;
        }

        .btxg1{
            position: absolute;
            height:30px ;
            width: 300px;
            top:50px;
            left: 100px;
        }
        .xg{
            display: none;
            position: absolute;
            top:50px;
            left:890px;
            height:50px ;
            width: 80px;
        }

        .myButton {
            -moz-box-shadow:inset 0px 39px 0px -24px #e67a73;
            -webkit-box-shadow:inset 0px 39px 0px -24px #e67a73;
            box-shadow:inset 0px 39px 0px -24px #e67a73;
            background-color:#e4685d;
            border:1px solid #ffffff;
            display:inline-block;
            cursor:pointer;
            color:#ffffff;
            font-family:Arial;
            font-size:15px;
            padding:5px 15px;
            text-decoration:none;
            text-shadow:0px 1px 0px #b23e35;
        }
        .myButton:hover {
            background-color:#eb675e;
        }
        .myButton:active {
            position:relative;
            top:1px;
        }

        table{
            border-collapse:collapse;
            width: 1220px;
            position: absolute;
            top:110px;
        }
        table,th, td
        {
            border: 1px solid black;
        }
        th
        {
            height:50px;
            text-align: center;
        }
        td{
            height:20px;
            text-align: center;
        }

        .myd{
            width: 1220px;
            height: 40px;
            position: absolute;
            top:565px;
        }

    </style>
    <style type="text/css">
        span{display: block;float: left;width: 50px;height: 20px;background-color: green;text-align: center;margin-right: 10px;}
        span:hover{cursor:pointer;}
    </style>



    <script type="text/javascript">//查询全部的
        var number=0;
        function getnum() {
            $.ajax({
                type:"get",
                url:"get_menu_number.do",//
                dateType:"JSON",
                data:{},//传送想要的页数
                beforeSend:function () {},
                success:function(data){
                    number=data.message.number;
                    console.log("get: " + data)
                    console.log("get: " + number)
                },
                error:function(data){
                    console.log();
                },
                complete:function(){}
            })

        }
        function AJAX(page) {
            // alert(0)
            getnum()
            var str='',span='',a=0;
            $.ajax({//
                    type:"POST",
                    url:"searchmenu_all.do",//
                    dateType:"JSON",
                    data:{p:page},//传送想要的页数
                    beforeSend:function () {},
                    success:function(data){
                        var arr = data.message
                        if(data.message.length != 0)//判断为不为零
                        {
                            var  c22='<td>选择</td>';
                            var  c23='<td>编号</td>';
                            var c24='<td>菜名</td>';
                            var c25='<td>餐类</td>';
                            var c26='<td>季节</td>';
                            var c27='<td>价格</td>';
                            var c28='<td>食评</td>';
                            var c29='<td>餐评</td>';
                            var c210='<td>操作一</td>';
                            var  c21='<td>操作二</td>';
                            str+='<tr>'+c22+c23+c24+c25+c26+c27+c28+c29+c210+c21+'</tr>';
                            
                            a="<td><select id='seasonc' style='width: 80px ;height:30px' ><option value='0' >春季</option><option value='1'>夏季</option><option value='2'>秋季</option><option value='3'>冬季</option><option value='4'>通用</option></select></td>"
                            b="<td><select id='canleic' style='width: 80px ;height:30px' ><option value='0' >早餐</option><option value='1'>正餐</option><option value='2'>酒水</option></select></td>"
                            var  c11='<td>'+"<input type='checkbox' name='ck'/>"+'</td>';
                            var  c12='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='vnoc' value=''/>"+'</td>';
                            var  c13='<td>'+"<input type='text'   style='text-align: center;width: 80px ;height:30px' id='vnamec' value=''/>"+'</td>';
                            var c14=b;
                            var c15=a;
                            var c16='<td>'+"<input type='text'   style='text-align: center;width: 80px ;height:30px' id='pricec' value=''/>"+'</td>';
                            var c17='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='pingfenc' value=''/>"+'</td>';
                            var c18='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='pingfen1c' value=''/>"+'</td>';
                            var c19='<td>'+"<button class='myButton'  type='button' onclick='mclear(this)' >清除</button>"+'</td>';
                            var c110='<td>'+"<button class='myButton'  type='button' onclick='add(this)' >增加</button>"+'</td>';
                            str+='<tr>'+c11+c12+c13+c14+c15+c16+c17+c18+c19+c110+'</tr>';
                            for(var i=0;i<=data.message.length-1;i++)
                            {
                                var  c1='<td>'+"<input type='checkbox' name='ck'/>"+'</td>';
                                var  c2='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='vnoc"+i+"' value='"+arr[i].id+"'/>"+'</td>';
                                var  c3='<td>'+"<input type='text'   style='text-align: center;width: 80px ;height:30px' id='vnamec"+i+"' value='"+arr[i].name+"'/>"+'</td>';
                                var c4='<td>'+"<input type='text'  style='text-align: center;width: 80px ;height:30px' id='canleic"+i+"' value='"+arr[i].type+"'/>"+'</td>';
                                var c5='<td>'+"<input type='text'  style='text-align: center;width: 80px ;height:30px' id='seasonc"+i+"' value='"+arr[i].season+"'/>"+'</td>';
                                var c6='<td>'+"<input type='text'  style='text-align: center;width: 80px ;height:30px' id='pricec"+i+"' value='"+arr[i].price+"'/>"+'</td>';
                                var c7='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='pingfenc"+i+"' value='"+arr[i].publicscore+"'/>"+'</td>';
                                var c8='<td>'+"<input type='text' readonly style='text-align: center;width: 80px ;height:30px' id='pingfen1c"+i+"' value='"+arr[i].privatescore+"'/>"+'</td>';
                                var c9='<td>'+"<button class='myButton'  type='button' onclick='del(this)' >删除</button>"+'</td>';
                                var c10='<td>'+"<button class='myButton'  type='button' onclick='xiugai(this)' >修改</button>"+'</td>';
                                str+='<tr>'+c1+c2+c3+c4+c5+c6+c7+c8+c9+c10+'</tr>';
                            }
                            $('#mytable').html(str);//添加生成的行
                            if(number%10==0)a=number/10;
                            else
                                a=parseInt(number/10)+1;
                            if(page==0){
                                if(a<3){
                                    for(var i=1;i<=a;i++){
                                        if(i==page+1){
                                            span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
                                            continue;}
                                        span+='<span>'+i+'</span>';//添加span
                                    }
                                }
                                else
                                {
                                    for(var i=1;i<=3;i++){
                                        if(i==page+1){
                                            span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
                                            continue;}
                                        span+='<span>'+i+'</span>';//添加span
                                    }
                                }

                            }
                            else
                            {
                                if(a>=page+2){
                                    for(var i=page;i<=page+2;i++){
                                        if(i==page+1){
                                            span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
                                            continue;}
                                        span+='<span>'+i+'</span>';//添加span
                                    }
                                }
                                else
                                {
                                    for(var i=page;i<=a;i++){
                                        if(i==page+1){
                                            span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
                                            continue;}
                                        span+='<span>'+i+'</span>';//添加span
                                    }

                                }
                            }
                            span+=" <label >总页数：</label>"
                            span+="<input size='3' readonly type='text' value='"+a+"'/>"
                            span+="<input size='3' type='text' id='z' value=''/>"
                            span+="<button type='button' onclick='b1()' >跳转</button>";
                            $('#mydiv').html(span);
                            $('span').on('click',send);//绑定响应事件
                            function send() {
                                var p=parseInt($(this).text())-1;
                                AJAX(p);
                            }
                        }
                        else
                        {
                            alert("当前菜单未补充");
                        }
                    },
                    error:function(data){
                        console.log();
                    },
                    complete:function(){}
                }

            )
        }

        function b1() {//跳转事件
            var p=parseInt($('#z').val())-1;
            AJAX(p);
        }
    </script>


    <script type="text/javascript">//查询季节
    function AJAX1(page) {
        var str='',span='',a=0;
        var season=$('#season2').val();
        if(season==0)season='春季';
        else if(season==1)season='夏季';
        else if(season==2)season='秋季';
        else if(season==3)season='冬季';
        else if(season==4)season='通用';
        $.ajax({//
                type:"POST",
                url:"searchmenu_season",//
                dateType:"JSON",
                data:{p:page,season:season},//传送想要的页数
                beforeSend:function () {},
                success:function(data){
                    var arr=JSON.parse(data);
                    if(arr.data.length != 0)//判断为不为零
                    {
                        var  c22='<td>选择</td>';
                        var  c23='<td>编号</td>';
                        var c24='<td>菜名</td>';
                        var c25='<td>餐类</td>';
                        var c26='<td>季节</td>';
                        var c27='<td>价格</td>';
                        var c28='<td>食评</td>';
                        var c29='<td>餐评</td>';
                        var c210='<td>操作一</td>';
                        var  c21='<td>操作二</td>';
                        str+='<tr>'+c22+c23+c24+c25+c26+c27+c28+c29+c210+c21+'</tr>';
                        
                        a="<td><select id='seasonc' style='width: 80px ;height:30px' ><option value='0' >春季</option><option value='1'>夏季</option><option value='2'>秋季</option><option value='3'>冬季</option><option value='4'>通用</option></select></td>"
                            b="<td><select id='canleic' style='width: 80px ;height:30px' ><option value='0' >早餐</option><option value='1'>正餐</option><option value='2'>酒水</option></select></td>"
                            var  c11='<td>'+"<input type='checkbox' name='ck'/>"+'</td>';
                            var  c12='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='vnoc' value=''/>"+'</td>';
                            var  c13='<td>'+"<input type='text'   style='text-align: center;width: 80px ;height:30px' id='vnamec' value=''/>"+'</td>';
                            var c14=b;
                            var c15=a;
                            var c16='<td>'+"<input type='text'   style='text-align: center;width: 80px ;height:30px' id='pricec' value=''/>"+'</td>';
                            var c17='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='pingfenc' value=''/>"+'</td>';
                            var c18='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='pingfen1c' value=''/>"+'</td>';
                            var c19='<td>'+"<button class='myButton'  type='button' onclick='mclear(this)' >清除</button>"+'</td>';
                            var c110='<td>'+"<button class='myButton'  type='button' onclick='add(this)' >增加</button>"+'</td>';
                            //alert(str);
                            str+='<tr>'+c11+c12+c13+c14+c15+c16+c17+c18+c19+c110+'</tr>';

                        for(var i=0;i<=arr.data.length-1;i++)
                        {
                            var  c1='<td>'+"<input type='checkbox' name='ck'/>"+'</td>';
                            var  c2='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='vnoc"+i+"' value='"+arr.data[i].vno+"'/>"+'</td>';
                            var  c3='<td>'+"<input type='text'   style='text-align: center;width: 80px ;height:30px' id='vnamec"+i+"' value='"+arr.data[i].vname+"'/>"+'</td>';
                            var c4='<td>'+"<input type='text'  style='text-align: center;width: 80px ;height:30px' id='canleic"+i+"' value='"+arr.data[i].menutype+"'/>"+'</td>';
                            var c5='<td>'+"<input type='text'  style='text-align: center;width: 80px ;height:30px' id='seasonc"+i+"' value='"+arr.data[i].season+"'/>"+'</td>';
                            var c6='<td>'+"<input type='text'  style='text-align: center;width: 80px ;height:30px' id='pricec"+i+"' value='"+arr.data[i].price+"'/>"+'</td>';
                            var c7='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='pingfenc"+i+"' value='"+arr.data[i].publicscore+"'/>"+'</td>';
                            var c8='<td>'+"<input type='text' readonly style='text-align: center;width: 80px ;height:30px' id='pingfen1c"+i+"' value='"+arr.data[i].privatescore+"'/>"+'</td>';
                            var c9='<td>'+"<button class='myButton'  type='button' onclick='del(this)' >删除</button>"+'</td>';
                            var c10='<td>'+"<button class='myButton'  type='button' onclick='xiugai(this)' >修改</button>"+'</td>';
                            str+='<tr>'+c1+c2+c3+c4+c5+c6+c7+c8+c9+c10+'</tr>';
                            
                        }
                        $('#mytable').html(str);//添加生成的行
                        if(arr.rowcount%10==0)a=arr.rowcount/10;
                        else
                            a=parseInt(arr.rowcount/10)+1;

                        if(page==0){
                            if(a<3){
                                for(var i=1;i<=a;i++){
                                    if(i==page+1){
                                        span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
                                        continue;}
                                    span+='<span>'+i+'</span>';//添加span
                                }
                            }
                            else
                            {
                                for(var i=1;i<=3;i++){
                                    if(i==page+1){
                                        span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
                                        continue;}
                                    span+='<span>'+i+'</span>';//添加span
                                }
                            }

                        }
                        else
                        {
                            if(a>=page+2){
                                for(var i=page;i<=page+2;i++){
                                    if(i==page+1){
                                        span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
                                        continue;}
                                    span+='<span>'+i+'</span>';//添加span
                                }
                            }
                            else
                            {
                                for(var i=page;i<=a;i++){
                                    if(i==page+1){
                                        span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
                                        continue;}
                                    span+='<span>'+i+'</span>';//添加span
                                }

                            }
                        }
                        span+=" <label >总页数：</label>"
                        span+="<input size='3' readonly type='text' value='"+a+"'/>"
                        span+="<input size='3' type='text' id='z' value=''/>"
                        span+="<button type='button' onclick='b2()' >跳转</button>";
                        $('#mydiv').html(span);
                        $('span').on('click',send);//绑定响应事件
                        function send() {
                            var p=parseInt($(this).text())-1;

                            AJAX(p);
                        }
                    }
                    else
                    {
                        alert("当前菜单未补充");
                    }
                },
                error:function(data){
                    console.log();
                },
                complete:function(){}
            }

        )
    }

    function b2() {//查询按钮事件
        var p=parseInt($('#z').val())-1;
        AJAX1(p);
    }
    </script>

    <script type="text/javascript">//查询菜名
    function AJAX2(page) {
        var str='',span='',a=0;
        var vname=$('#vname2').val();
        $.ajax({//
                type:"POST",
                url:"searchmenu_name",//
                dateType:"JSON",
                data:{p:page,vname:vname},//传送想要的页数
                beforeSend:function () {},
                success:function(data){
                    var arr=JSON.parse(data);
                    if(arr.data.length != 0)//判断为不为零
                    {
                        var  c22='<td>选择</td>';
                        var  c23='<td>编号</td>';
                        var c24='<td>菜名</td>';
                        var c25='<td>餐类</td>';
                        var c26='<td>季节</td>';
                        var c27='<td>价格</td>';
                        var c28='<td>食评</td>';
                        var c29='<td>餐评</td>';
                        var c210='<td>操作一</td>';
                        var  c21='<td>操作二</td>';
                        str+='<tr>'+c22+c23+c24+c25+c26+c27+c28+c29+c210+c21+'</tr>';


                        a="<td><select id='seasonc' style='width: 80px ;height:30px' ><option value='0' >春季</option><option value='1'>夏季</option><option value='2'>秋季</option><option value='3'>冬季</option><option value='4'>通用</option></select></td>"
                            b="<td><select id='canleic' style='width: 80px ;height:30px' ><option value='0' >早餐</option><option value='1'>正餐</option><option value='2'>酒水</option></select></td>"
                            var  c11='<td>'+"<input type='checkbox' name='ck'/>"+'</td>';
                            var  c12='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='vnoc' value=''/>"+'</td>';
                            var  c13='<td>'+"<input type='text'   style='text-align: center;width: 80px ;height:30px' id='vnamec' value=''/>"+'</td>';
                            var c14=b;
                            var c15=a;
                            var c16='<td>'+"<input type='text'   style='text-align: center;width: 80px ;height:30px' id='pricec' value=''/>"+'</td>';
                            var c17='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='pingfenc' value=''/>"+'</td>';
                            var c18='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='pingfen1c' value=''/>"+'</td>';
                            var c19='<td>'+"<button class='myButton'  type='button' onclick='mclear(this)' >清除</button>"+'</td>';
                            var c110='<td>'+"<button class='myButton'  type='button' onclick='add(this)' >增加</button>"+'</td>';
                            str+='<tr>'+c11+c12+c13+c14+c15+c16+c17+c18+c19+c110+'</tr>';

                        for(var i=0;i<=arr.data.length-1;i++)
                        {
                            var  c1='<td>'+"<input type='checkbox' name='ck'/>"+'</td>';
                            var  c2='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='vnoc"+i+"' value='"+arr.data[i].vno+"'/>"+'</td>';
                            var  c3='<td>'+"<input type='text'   style='text-align: center;width: 80px ;height:30px' id='vnamec"+i+"' value='"+arr.data[i].vname+"'/>"+'</td>';
                            var c4='<td>'+"<input type='text'  style='text-align: center;width: 80px ;height:30px' id='canleic"+i+"' value='"+arr.data[i].menutype+"'/>"+'</td>';
                            var c5='<td>'+"<input type='text'  style='text-align: center;width: 80px ;height:30px' id='seasonc"+i+"' value='"+arr.data[i].season+"'/>"+'</td>';
                            var c6='<td>'+"<input type='text'  style='text-align: center;width: 80px ;height:30px' id='pricec"+i+"' value='"+arr.data[i].price+"'/>"+'</td>';
                            var c7='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='pingfenc"+i+"' value='"+arr.data[i].publicscore+"'/>"+'</td>';
                            var c8='<td>'+"<input type='text' readonly style='text-align: center;width: 80px ;height:30px' id='pingfen1c"+i+"' value='"+arr.data[i].privatescore+"'/>"+'</td>';
                            var c9='<td>'+"<button class='myButton'  type='button' onclick='del(this)' >删除</button>"+'</td>';
                            var c10='<td>'+"<button class='myButton'  type='button' onclick='xiugai(this)' >修改</button>"+'</td>';
                            str+='<tr>'+c1+c2+c3+c4+c5+c6+c7+c8+c9+c10+'</tr>';
                            
                        }
                        $('#mytable').html(str);//添加生成的行
                        if(arr.rowcount%10==0)a=arr.rowcount/10;
                        else
                            a=parseInt(arr.rowcount/10)+1;

                        if(page==0){
                            if(a<3){
                                for(var i=1;i<=a;i++){
                                    if(i==page+1){
                                        span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
                                        continue;}
                                    span+='<span>'+i+'</span>';//添加span
                                }
                            }
                            else
                            {
                                for(var i=1;i<=3;i++){
                                    if(i==page+1){
                                        span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
                                        continue;}
                                    span+='<span>'+i+'</span>';//添加span
                                }
                            }

                        }
                        else
                        {
                            if(a>=page+2){
                                for(var i=page;i<=page+2;i++){
                                    if(i==page+1){
                                        span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
                                        continue;}
                                    span+='<span>'+i+'</span>';//添加span
                                }
                            }
                            else
                            {
                                for(var i=page;i<=a;i++){
                                    if(i==page+1){
                                        span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
                                        continue;}
                                    span+='<span>'+i+'</span>';//添加span
                                }

                            }
                        }
                        span+=" <label >总页数：</label>"
                        span+="<input size='3' readonly type='text' value='"+a+"'/>"
                        span+="<input size='3' type='text' id='z' value=''/>"
                        span+="<button type='button' onclick='b3()' >跳转</button>";
                        $('#mydiv').html(span);
                        $('span').on('click',send);//绑定响应事件
                        function send() {
                            var p=parseInt($(this).text())-1;
                            AJAX(p);
                        }
                    }
                    else
                    {
                        alert("当前菜单未补充");
                    }
                },
                error:function(data){
                    console.log();
                },
                complete:function(){}
            }

        )
    }

    function b3() {//查询按钮事件
        var p=parseInt($('#z').val())-1;
        AJAX2(p);
    }
    </script>

    <script type="text/javascript">//查询菜名
    function AJAX3(page) {
        var str='',span='',a=0;
        var can=$('#can1').val();
        if(can==0)can='早餐';
        else if(can==1)can='正餐';
        else if(can==2)can='酒水';
        //alert(can)
        $.ajax({//
                type:"POST",
                url:"searchmenu_type",//
                dateType:"JSON",
                data:{p:page,type:can},//传送想要的页数
                beforeSend:function () {},
                success:function(data){
                    var arr=JSON.parse(data);
                    if(arr.data.length != 0)//判断为不为零
                    {
                        var  c22='<td>选择</td>';
                        var  c23='<td>编号</td>';
                        var c24='<td>菜名</td>';
                        var c25='<td>餐类</td>';
                        var c26='<td>季节</td>';
                        var c27='<td>价格</td>';
                        var c28='<td>食评</td>';
                        var c29='<td>餐评</td>';
                        var c210='<td>操作一</td>';
                        var  c21='<td>操作二</td>';
                        str+='<tr>'+c22+c23+c24+c25+c26+c27+c28+c29+c210+c21+'</tr>';


                        a="<td><select id='seasonc' style='width: 80px ;height:30px' ><option value='0' >春季</option><option value='1'>夏季</option><option value='2'>秋季</option><option value='3'>冬季</option><option value='4'>通用</option></select></td>"
                            b="<td><select id='canleic' style='width: 80px ;height:30px' ><option value='0' >早餐</option><option value='1'>正餐</option><option value='2'>酒水</option></select></td>"
                            var  c11='<td>'+"<input type='checkbox' name='ck'/>"+'</td>';
                            var  c12='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='vnoc' value=''/>"+'</td>';
                            var  c13='<td>'+"<input type='text'   style='text-align: center;width: 80px ;height:30px' id='vnamec' value=''/>"+'</td>';
                            var c14=b;
                            var c15=a;
                            var c16='<td>'+"<input type='text'   style='text-align: center;width: 80px ;height:30px' id='pricec' value=''/>"+'</td>';
                            var c17='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='pingfenc' value=''/>"+'</td>';
                            var c18='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='pingfen1c' value=''/>"+'</td>';
                            var c19='<td>'+"<button class='myButton'  type='button' onclick='mclear(this)' >清除</button>"+'</td>';
                            var c110='<td>'+"<button class='myButton'  type='button' onclick='add(this)' >增加</button>"+'</td>';
                            str+='<tr>'+c11+c12+c13+c14+c15+c16+c17+c18+c19+c110+'</tr>';

                        for(var i=0;i<=arr.data.length-1;i++)
                        {
                            var  c1='<td>'+"<input type='checkbox' name='ck'/>"+'</td>';
                            var  c2='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='vnoc"+i+"' value='"+arr.data[i].vno+"'/>"+'</td>';
                            var  c3='<td>'+"<input type='text'   style='text-align: center;width: 80px ;height:30px' id='vnamec"+i+"' value='"+arr.data[i].vname+"'/>"+'</td>';
                            var c4='<td>'+"<input type='text'  style='text-align: center;width: 80px ;height:30px' id='canleic"+i+"' value='"+arr.data[i].menutype+"'/>"+'</td>';
                            var c5='<td>'+"<input type='text'  style='text-align: center;width: 80px ;height:30px' id='seasonc"+i+"' value='"+arr.data[i].season+"'/>"+'</td>';
                            var c6='<td>'+"<input type='text'  style='text-align: center;width: 80px ;height:30px' id='pricec"+i+"' value='"+arr.data[i].price+"'/>"+'</td>';
                            var c7='<td>'+"<input type='text'  readonly style='text-align: center;width: 80px ;height:30px' id='pingfenc"+i+"' value='"+arr.data[i].publicscore+"'/>"+'</td>';
                            var c8='<td>'+"<input type='text' readonly style='text-align: center;width: 80px ;height:30px' id='pingfen1c"+i+"' value='"+arr.data[i].privatescore+"'/>"+'</td>';
                            var c9='<td>'+"<button class='myButton'  type='button' onclick='del(this)' >删除</button>"+'</td>';
                            var c10='<td>'+"<button class='myButton'  type='button' onclick='xiugai(this)' >修改</button>"+'</td>';
                            str+='<tr>'+c1+c2+c3+c4+c5+c6+c7+c8+c9+c10+'</tr>';
                            
                        }
                        $('#mytable').html(str);//添加生成的行
                        if(arr.rowcount%10==0)a=arr.rowcount/10;
                        else
                            a=parseInt(arr.rowcount/10)+1;

                        if(page==0){
                            if(a<3){
                                for(var i=1;i<=a;i++){
                                    if(i==page+1){
                                        span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
                                        continue;}
                                    span+='<span>'+i+'</span>';//添加span
                                }
                            }
                            else
                            {
                                for(var i=1;i<=3;i++){
                                    if(i==page+1){
                                        span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
                                        continue;}
                                    span+='<span>'+i+'</span>';//添加span
                                }
                            }

                        }
                        else
                        {
                            if(a>=page+2){
                                for(var i=page;i<=page+2;i++){
                                    if(i==page+1){
                                        span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
                                        continue;}
                                    span+='<span>'+i+'</span>';//添加span
                                }
                            }
                            else
                            {
                                for(var i=page;i<=a;i++){
                                    if(i==page+1){
                                        span+='<span style="background-color: #DEDEDE">'+i+'</span>';//添加span
                                        continue;}
                                    span+='<span>'+i+'</span>';//添加span
                                }

                            }
                        }
                        span+=" <label >总页数：</label>"
                        span+="<input size='3' readonly type='text' value='"+a+"'/>"
                        span+="<input size='3' type='text' id='z' value=''/>"
                        span+="<button type='button' onclick='b4()' >跳转</button>";
                        $('#mydiv').html(span);
                        $('span').on('click',send);//绑定响应事件
                        function send() {
                            var p=parseInt($(this).text())-1;

                            AJAX(p);
                        }
                    }
                    else
                    {
                        alert("当前菜单未补充");
                    }
                },
                error:function(data){
                    console.log();
                },
                complete:function(){}
            }

        )
    }

    function b4() {//查询按钮事件
        var p=parseInt($('#z').val())-1;
        AJAX3(p);
    }
    </script>

    <script type="text/javascript">
        function add() {/*增加*/
        	//alert('aaaa')
            var ch=document.getElementsByName('ck');
            if(ch[0].checked==true){
                var tr1=document.getElementById('mytable').insertRow(2);
                var c0=tr1.insertCell(0);
                var c1=tr1.insertCell(1);
                var c2=tr1.insertCell(2);
                var c3=tr1.insertCell(3);
                var c4=tr1.insertCell(4);
                var c5=tr1.insertCell(5);
                var c6=tr1.insertCell(6);
                var c7=tr1.insertCell(7);
                var c8=tr1.insertCell(8);
                var c9=tr1.insertCell(9);
                
                var can=$('#canleic').val();
                if(can==0)can='早餐';
                else if(can==1)can='正餐';
                else if(can==2)can='酒水';
                //alert(can)
                var season=$('#seasonc').val();
                //alert(season)
                if(season==0)season='春季';
                else if(season==1)season='夏季';
                else if(season==2)season='秋季';
                else if(season==3)season='冬季';
                else if(season==4)season='通用';
                var vname=$('#vnamec').val();
                var price=$('#pricec').val();
                //alert(vname)
                //alert(price)
                c0.innerHTML="<input type='checkbox' name='ck'/>";
                c1.innerHTML="";
                c2.innerHTML="<input type='text'  style='text-align: center;' size='11' name='vname' value='"+vname+"'/>";
                c3.innerHTML="<input type='text'  style='text-align: center;width: 80px ;height:30px' name='canlei' value='"+can+"'/>";
                c4.innerHTML="<input type='text'  style='text-align: center;width: 80px ;height:30px' name='season' value='"+season+"'/>";
                c5.innerHTML="<input type='text'  style='text-align: center;width: 80px ;height:30px' name='price' value='"+price+"'/>";
                c6.innerHTML="";
                c7.innerHTML="";
                c8.innerHTML="<button class='myButton'  type='button' onclick='' >删除（无用）</button>";
                c9.innerHTML="<button class='myButton'  type='button' onclick='' >修改（无用）</button>";
                $.ajax({//
                        type:"POST",
                        url:"insertmenu",//
                        dateType:"JSON",
                        data:{vname:vname,price:price,season:season,type:can},
                        beforeSend:function () {},
                        success:function(data){
                        		//alert(data[0].vname)
                            if(data[0].vname != null)
                            {
                                alert("添加成功！");
                            }
                            else
                            {
                                alert("输入信息有误无法操作！");
                            }
                        },
                        error:function(data){
                            console.log();
                        },
                        complete:function(){}
                    }

                )
            }
            else
            {
                alert("请点击选择确认框！")
            }

        }

            function chaxun(){
            var a=$('#liebiao').val();
            if(a==0){
                AJAX(0)
            }
            if(a==1)//季节
            {
                AJAX1(0)
            }

            if(a==2)//菜名
            {
                AJAX2(0)

            }

            if(a==3)//餐类
            {
                AJAX3(0)
            }


        }

        function xiugai(r) {
            var i=r.parentNode.parentNode.rowIndex;
            var vno=$("#vnoc"+(i-2)).val();
            var vname=$("#vnamec"+(i-2)).val();
            var canlei=$("#canleic"+(i-2)).val();
            var season=$("#seasonc"+(i-2)).val();
            var price=$("#pricec"+(i-2)).val();
            var ch=document.getElementsByName('ck');
            if(ch[i-1].checked==true){
                $.ajax({//
                        type:"POST",
                        url:"updatemenu",//
                        dateType:"JSON",
                        data:{vno:vno,vname:vname,season:season,price:price,type:canlei,},
                        beforeSend:function () {},
                        success:function(data){
                            if(data.status == 1)
                            {
                                alert("修改成功！");
                            }
                            else
                            {
                                alert("输入信息有误无法操作！");

                            }
                        },
                        error:function(data){
                            console.log();
                        },
                        complete:function(){}
                    }

                )


            }
            else
                alert("未选中要修改的行")

            var ch=document.getElementsByName('ck');
            for(i=ch.length-1;i>=0;i--){
                ch[i].checked=false;
            }
        }

        function del(r){
            var i=r.parentNode.parentNode.rowIndex;
           
            //alert(i);
            var vno=$("#vnoc"+(i-2)).val();
            //alert(vno);
            var ch=document.getElementsByName('ck');
            if(ch[i-1].checked==true){
                document.getElementById('mytable').deleteRow(i);
                $.ajax({//
                        type:"POST",
                        url:"deletemenu",//
                        dateType:"JSON",
                        data:{vno:vno},
                        beforeSend:function () {},
                        success:function(data){
                            if(data.status == 1)
                            {
                                alert("删除成功！");
                            }
                            else
                            {
                                alert("输入信息有误无法操作！");

                            }
                        },
                        error:function(data){
                            console.log();
                        },
                        complete:function(){}
                    }

                )
                }
            else
                alert("未选中要删除的行")


            var ch=document.getElementsByName('ck');
            for(i=ch.length-1;i>=0;i--){
                ch[i].checked=false;
            }

        }

        function mclear() {
            $('#vnamec').val('');
            $('#canleic').val('0')
            $('#seasonc').val('0')
            $('#pricec').val('');
            var ch=document.getElementsByName('ck');
            for(i=ch.length-1;i>=0;i--){
                ch[i].checked=false;
            }
        }




        function my_se(){
            var a=$('#liebiao').val();
            if(a=='1')
            {
                $('#my_inquire1').hide();
                $('#my_inquire3').hide();
                $('#my_inquire2').show();
            }
            else if(a=='2')
            {
                $('#my_inquire3').hide();
                $('#my_inquire2').hide();
                $('#my_inquire1').show();
            }
            else if(a=='0'){
                $('#my_inquire3').hide();
                $('#my_inquire2').hide();
                $('#my_inquire1').hide();

            }
            else if(a=='3'){
                $('#my_inquire3').show();
                $('#my_inquire2').hide();
                $('#my_inquire1').hide();

            }
        }
    </script>

</head>
<body style="margin: 0px 0px 0px 0px;padding: 0px 0px 0px 0px; ">

<div>
    <hr class="hr1"></hr>
</div>

<div class="myweb">
    <div class="myweb1">/*放login图标*/
        <div class="photo1">
        </div>
    </div>

    <div class="myweb2">
        <div class="nav" >
            <ul >
                   <li><a href="shouye.html" >首页</a></li>
                   <li><a href="menu.html" >大菜单</a></li>
                   <li><a href="todaymenu.html" >今日食堂</a></li>
                   <li><a href="littlemenu.html" >今日餐厅</a></li>
                   <li><a href="seeorder.html">查看预约</a></li>
                   <li><a href="pay.html">统计支出</a></li>
                   <li><a href="mark.html">签留单</a></li>
            </ul>
        </div>
    </div>

    <div class="myweb3">
        <div class="hr2"></div>
    </div>

    <div class="myweb4">
        <div class="pt1">
        </div>
        <div class="pt2">
        </div>
        <div class="pt3">
        </div>
        <div class="pt4">
        </div>
    </div>

    <div class="myweb5">
    </div>

    <div class="myweb7" >
        <div class="hr3"></div>

        <div class="btxg1">
            <!--
            <div style="position: absolute;left: 0px;">
                <button class="myButton" type="button" onclick="input_add()">增加</button>
            </div>
            <div style="position: absolute;left: 70px;">
                <button class="myButton" type="button" onclick="my_delete()">删除</button>
            </div>
            <div style="position: absolute;left: 140px;">
                <button class="myButton" type="button" onclick="my_show1()">修改</button>
            </div>
            -->
        </div>

        <div class="leibie">
            <select id="liebiao" style="width: 80px ;height:30px" onchange="my_se()"> 
                <option value="0" >全部</option> 
                <option value="1" >季节</option> 
                <option value="2">菜名</option>
                <option value="3">类别</option>
            </select> 
        </div>

        <div class="btxg">
                <button class="myButton" type="button" onclick="chaxun()">查询</button>
        </div>

        <div class="xg" id="my_inquire1">
            <input type="text" id="vname2" value="" size="10" >
        </div>
        <div class="xg" id="my_inquire2">
            <select id="season2" style="width: 80px ;height:30px" > 
                <option value="0" >春季</option> 
                <option value="1">夏季</option>
                <option value="2">秋季</option>
                <option value="3">冬季</option> 
                <option value="4">通用</option> 
            </select> 
        </div>

        <div class="xg" id="my_inquire3">
            <select id="can1" style="width: 80px ;height:30px" > 
                <option value="0" >早餐</option> 
                <option value="1">正餐</option>
                <option value="2">酒水</option>
            </select> 
        </div>

        <div class="hr4"></div>

        <div class="table1">
            <table  id="mytable" >
            </table>

        </div>
        <div  class="myd">
            <div id="mydiv" style="position: absolute;left: 30%;">

            </div>
        </div>
    </div>
    <div class="myweb6">
        <p style="color: white;position: absolute;top:20px;left:500px;">乐百特公司服务地址</p>
    </div>
</div>

</body>
</html>